<div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
  <h1>Ride Completed Successfully!</h1>
  
  <div style="background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h2 style="margin-top: 0;">Ride Details</h2>
    <p><strong>Passenger:</strong> <%= @booking.passenger.user.full_name rescue "Passenger" %></p>
    <p><strong>From:</strong> <%= @booking.pickup rescue "Pickup location" %></p>
    <p><strong>To:</strong> <%= @booking.dropoff rescue "Dropoff location" %></p>
    <p><strong>Price:</strong> <%= number_to_currency(@booking.ride.estimated_price) rescue "Price unavailable" %></p>
  </div>

  <div style="background: #10b981; color: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h2 style="margin-top: 0;">Financial Summary</h2>
    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
      <p><strong>This Ride:</strong></p>
      <p><%= @booking.formatted_price(@booking.ride.estimated_price) %></p>
    </div>
    
    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
      <p><strong>Last 24 Hours:</strong></p>
      <p><%= @booking.formatted_price(@booking.ride.driver.rides.total_estimated_price_for_24_hours) %></p>
    </div>
    
    <div style="display: flex; justify-content: space-between; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 10px; margin-top: 10px;">
      <p><strong>Last 7 Days:</strong></p>
      <p><%= @booking.formatted_price(@booking.ride.driver.rides.total_estimated_price_for_last_week) %></p>
    </div>
  </div>

  <div style="text-align: center;">
    <%= link_to "View Dashboard", 
        dashboard_url,
        style: "display: inline-block; background: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;" %>
  </div>
</div> 