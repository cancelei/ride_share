<div class="grid grid-cols-1 md:grid-cols-2 gap-6">

  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-xl font-semibold mb-4">Future Bookings</h2>
    <% if @pending_bookings.any? %>
      <div class="space-y-4">
        <% @pending_bookings.each do |booking| %>
          <div class="border-b pb-4" id="booking-<%= booking.id %>">
            <h2><%= booking.scheduled_time&.strftime("%A, %B %d, %Y at %I:%M %p") %></h2>
            <%= render 'dashboard/booking_distance', booking: booking, current_coordinates: @current_coordinates %>
            <p><strong>From:</strong> <%= booking.pickup %></p>
            <p><strong>To:</strong> <%= booking.dropoff %></p>
            <p><strong>Seats:</strong> <%= booking.requested_seats %></p>
            <p><strong>Distance:</strong> <%= booking.distance_km %> km</p>
            <p><strong>Estimated Duration:</strong> <%= booking.estimated_duration_minutes %> minutes</p>
            <p><strong>Total Travel Duration:</strong> <%= booking.total_travel_duration_minutes %> minutes</p>
            <%= render 'rides/form', ride: Ride.new, booking_id: booking.id %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-500">No future bookings</p>
    <% end %>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-xl font-semibold mb-4">Active Rides</h2>
    <% if @active_rides.any? %>
      <div class="space-y-4">
        <% @active_rides.each do |ride| %>
          <div class="border-b pb-4">
            <p><strong>Status:</strong> <%= ride.status.titleize %></p>
            <p><strong>Scheduled Time:</strong> <%= ride.bookings.first.scheduled_time.strftime("%A, %B %d, %Y at %I:%M %p") %></p>
            <p><strong>Pickup:</strong> <%= ride.bookings.first.pickup %></p>
            <p><strong>Dropoff:</strong> <%= ride.bookings.first.dropoff %></p>
            <p><strong>Distance:</strong> <%= ride.bookings.first.distance_km %> km</p>
            <p><strong>Total Seats:</strong> <%= ride.bookings.sum(:requested_seats) %></p>
            <p><strong>Estimated Duration:</strong> <%= ride.bookings.first.estimated_duration_minutes %> minutes</p>
            <p><strong>Total Travel Duration:</strong> <%= ride.bookings.first.total_travel_duration_minutes %> minutes</p>
            <p><strong>Solicitors:</strong> <%= ride.bookings.count %></p>
            <%= link_to "View Details", ride_path(ride), 
                class: "mt-2 inline-block px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-500" %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-500">No active rides</p>
    <% end %>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-xl font-semibold mb-4">Driver Profile</h2>
    <% if @driver_profile %>
      <div class="space-y-4">
        <p><strong>License:</strong> <%= @driver_profile.license %></p>
        <p><strong>Issuer:</strong> <%= @driver_profile.license_issuer %></p>
        
        <% if @current_vehicle %>
          <div class="mt-4">
            <h3 class="font-medium">Current Vehicle</h3>
            <p><%= @current_vehicle.brand %> <%= @current_vehicle.model %></p>
            <p>Registration: <%= @current_vehicle.registration_number %></p>
          </div>
        <% else %>
          <%= link_to "Add a Vehicle", new_driver_profile_vehicle_path(@driver_profile), 
              class: "inline-block mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500" %>
        <% end %>
      </div>
    <% else %>
      <%= link_to "Create Driver Profile", new_driver_profile_path, 
          class: "inline-block px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500" %>
    <% end %>
  </div>
</div> 